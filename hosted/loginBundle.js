(()=>{"use strict";const e=(e,a,n)=>fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a._csrf},body:JSON.stringify(a)}).then((e=>t(e,n))),t=(e,t)=>e.ok?e.json():t(e.json()),a=t=>{t.preventDefault();const a=t.target,n=a.elements.username.value,r=a.elements.password.value,s=a.elements._csrf.value,o=a.querySelector(".errorMessage");return""===n||""===r?(o.textContent="Username and Password are required!",!1):(o.textContent="",e("/login",{username:n,pass:r,_csrf:s},(e=>{e.then((e=>{o.textContent=e.error}))})).then((e=>{void 0!==e&&window.location.assign(e.redirect)})),!1)},n=t=>{t.preventDefault();const a=t.target,n=a.elements.username.value,r=a.elements.password.value,s=a.elements.password2.value,o=a.elements._csrf.value,l=a.querySelector(".errorMessage");return""===n||""===r?(l.textContent="Username and Password are required!",!1):r!=s?(l.textContent="Passwords do not match!",!1):(l.textContent="",e("/signup",{username:n,pass:r,pass2:s,_csrf:o},(e=>{e.then((e=>{l.textContent=e.error}))})).then((e=>{void 0!==e&&window.location.assign(e.redirect)})),!1)},r=e=>React.createElement("form",{id:"loginForm",name:"loginForm",onSubmit:a,action:"/login",method:"POST"},React.createElement("label",{htmlFor:"username"},"Username:"),React.createElement("input",{className:"u-full-width",type:"text",placeholder:"Enter Username Here...",name:"username"}),React.createElement("label",{htmlFor:"username"},"Password:"),React.createElement("input",{className:"u-full-width",type:"password",placeholder:"Enter Password Here...",name:"password"}),React.createElement("p",{name:"errorMessage",className:"errorMessage"}),React.createElement("input",{type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"button-primary",type:"submit",value:"Login"})),s=e=>React.createElement("form",{id:"signupForm",name:"signupForm",onSubmit:n,action:"/signup",method:"POST"},React.createElement("label",{htmlFor:"username"},"Username:"),React.createElement("input",{className:"u-full-width",type:"text",placeholder:"Type Username here...",name:"username"}),React.createElement("label",{htmlFor:"username"},"Password:"),React.createElement("input",{className:"u-full-width",type:"password",placeholder:"Type Password here...",name:"password"}),React.createElement("label",{htmlFor:"username"},"Re-Type Password:"),React.createElement("input",{className:"u-full-width",type:"password",placeholder:"Re-Type Password Here...",name:"password2"}),React.createElement("p",{className:"errorMessage"}),React.createElement("input",{type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"button-primary",type:"submit",value:"Sign up"})),o=e=>{ReactDOM.render(React.createElement(r,{csrf:e}),document.querySelector("#content"))},l=()=>{("/getToken",fetch("/getToken",{method:"GET",headers:{Accept:"application/json"}}).then((e=>t(e,undefined)))).then((e=>(e=>{const t=document.querySelector("#loginButton"),a=document.querySelector("#signupButton");t.addEventListener("click",(t=>(t.preventDefault(),o(e),!1))),a.addEventListener("click",(t=>(t.preventDefault(),(e=>{ReactDOM.render(React.createElement(s,{csrf:e}),document.querySelector("#content"))})(e),!1))),o(e)})(e.csrfToken)))};window.onload=()=>{l()}})();